# ã€Goè¨€èªã§ã¤ãã‚‹ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã€ã®å†™çµŒã¨æ”¹é€ 

## æœ¬å®¶

- [Writing An Interpreter In Go | Thorsten Ball](https://interpreterbook.com/)
- [O'Reilly Japan - Goè¨€èªã§ã¤ãã‚‹ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿](https://www.oreilly.co.jp/books/9784873118222/)

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰DLãƒªãƒ³ã‚¯

https://interpreterbook.com/waiig_code_1.4.zip

<!--- ã¡ã‚‡ã£ã¨æ¥ãšã‹ã—ã„ã®ã§ã‚³ãƒ¡ãƒ³ãƒˆã«ã—ã¦ãŠã“ã†

## Lexerã“ã‚Œã˜ã‚ƒã‚“

[(9) Lexical Scanning in Go - Rob Pike - YouTube](https://www.youtube.com/watch?v=HxaD_trXwRE&ab_channel=GoogleFOSSSydney)

- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’é›‘ã«çœºã‚ãŸã ã‘ãªã‚“ã ã‘ã©ã€monkeyã¨åŒã˜ã‚„ã‚Šæ–¹ã€‚ãªã®ã§èª­ã‚ãŸæ°—ã«ãªã‚‹
- ä¸¦è¡Œå‡¦ç†ã‚’ä½¿ã†ã¨ãƒ¬ã‚­ã‚µãƒ¼ã®è¨­è¨ˆãŒEasyã«ãªã‚‹ã£ã¦æ›¸ã„ã¦ã‚ã‚‹ã‘ã©ã»ã‚“ã¾ã‹ï¼Ÿww


## 2022/08/03(æ°´) å­—å¥è§£æä½•ã‚‚è¦‹ãªã„ãƒãƒ£ãƒ³ãƒ¬ã‚¸

- ãŸã¶ã‚“ã€100åˆ†ãã‚‰ã„ã€‚
- ã ã„ã¶é¦´æŸ“ã‚“ã§ããŸèª¬ãŒã‚ã‚‹
- ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å­—å¥è§£æãªã‚‰åˆ¥è¨€èªã§ã‚‚è¡Œã‘ãã†ã€‚
- å®Ÿéš›ã¯ã¡ã‚‡ã£ã¨ã¿ãŸ
- çµ‚ç«¯ã«å¼•ã£ã‹ã‹ã‚ŠãŒã¡ã€‚ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚„ãª
- æ–‡å­—åˆ—ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã¨ã‹ãƒ ã‚ºã„ã­
- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åˆ†ã‘ãŸã»ã†ãŒè€ƒãˆã‚„ã™ã„

## 2022/08/02(ç«) ã‚¿ã‚¤ãƒ ã‚¢ã‚¿ãƒƒã‚¯

- 1ç« : ã ã„ãŸã„60åˆ†ã‹ã‹ã‚‹
- ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã ã‚‹ããªã£ã¦ã‚„ã‚ãŸ
- l.readPositionã¨ã‹ã€å…¨ç„¶å¿˜ã‚Œã¦ãŸ
- ã¾ãŸã‚„ã‚ã†
- è…¹æ¸›ã£ãŸã—ã€2ç« ã¯ã¾ãŸä»Šåº¦ï¼

## 2022/08/02 2ç« çµ‚ã‚ã£ã£ãŸã‚‰ã€1ç« ã‹ã‚‰ã™ã¹ã¦å¾©ç¿’ã™ã‚‹

- ç†ç”±: 3ç« ã„ã£ã¦ã‹ã‚‰3ç« ã«æˆ»ã‚‹ã®ã¯å¤šåˆ†ç„¡ç†ã ã‹ã‚‰ã€‚
    - ã‚ã¨ã€1ç« ã¯60åˆ†ãã‚‰ã„ã§ãŠã‚ã‚‹ã‹ã‚‰ä¸€ç·’ã«ã‚„ã£ã¡ã‚ƒã£ã¦ã„ã„
- ã‚„ã‚‹ã“ã¨
    - t.Run()ã‚’ä½¿ã†ã‚ˆã†ã«ã™ã‚‹
    - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã“ã ã‚ã‚‹
    - bytes.Bufferã˜ã‚ƒãªãã¦strings.Builderã‚’ä½¿ã†
    - ç†è§£ã™ã‚‹ã®ãŒç›®æ¨™ã ã‹ã‚‰æ—¥æœ¬èªã‚’ãƒãƒ³ãƒãƒ³ä½¿ã†
    - traceã¯ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã¿ãŸã„ãªã®ã‚’ã„ã‚Œã‚‹
    - !testFoo ã¨ if !testFoo{return} ã®é•ã„ãŒè¬
    - t.Fatalf ã¨ t.Errorf ã®ä½¿ã„åˆ†ã‘ãŒè¬ã€‚ç‰¹ã«ã‚µãƒ–ãƒ†ã‚¹ãƒˆã®ã¨ãã€‚å®Ÿç”¨Goã«æ›¸ã„ã¦ãªã„ã‹ãªã€‚

## ã‚³ãƒ„

## 1ç« : å­—å¥è§£æå™¨

- 60åˆ†ã‚ã‚Œã°å†™çµŒã¯ã„ã‘ã‚‹ï¼ ğŸ‘
- ç´°ã‹ã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚„Goçš„ãªã¨ã“ã‚ã¯ã¨ã‚‚ã‹ãï¼
- **Lexerã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯1ãƒˆãƒ¼ã‚¯ãƒ³ãšã¤è¶³ã—ã¦ã„ãã¨ãƒã‚¸ã§åˆ†ã‹ã‚Šã‚„ã™ã„**ã€‚æœ€å¤§ã§ã‚‚1è¡Œã€‚Lexerã¯æ„å‘³ã®è§£é‡ˆã¯ã—ãªã„ã‹ã‚‰1ãƒˆãƒ¼ã‚¯ãƒ³ãšã¤ã§ã„ã„ã®ã ã€‚ä¸€æ°—ã«ã‚„ã‚‹ã¨ã€ã‚ã‹ã‚Šã«ãã„ã—ã‚„ã‚‹æ°—ãªããªã‚‹ã€‚
- JSONã®ãƒ¬ã‚­ã‚µãƒ¼(Notãƒ‘ãƒ¼ã‚µãƒ¼ï¼)ã‚‚ã€åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã§çµæ§‹ã„ã‘ã‚‹ã‚“ã˜ã‚ƒã­ï¼Ÿ
- é›»å“ã®ãƒ¬ã‚­ã‚µãƒ¼ãªã‚‰ã€ç™»å ´ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ãŒå°‘ãªã„ã‹ã‚‰ã‚‚ã£ã¨ã„ã„æ„Ÿã˜ã«ã„ã‘ã‚‹ã‚“ã˜ã‚ƒã­ï¼Ÿ ãŠï¼ï¼Ÿï¼ï¼Ÿï¼Ÿ
    - INT ( ) + - * / ã¨ ILLEGAL
    - ã“ã‚Œã ã‘ã˜ã‚ƒã‚“ï¼ï¼
    - **2æ–‡å­—ãƒˆãƒ¼ã‚¯ãƒ³ãŒå­˜åœ¨ã—ãªã„ã‹ã‚‰**ã€å…ˆèª­ã¿ã‚‚ã„ã‚‰ãªã„

## 2ç« 

- çµŒé¨“ãŒç„¡ã„ã‹ã‚‰ã€é›£ã—ãæ„Ÿã˜ã‚‹ã ã‘ã£ã¦è©±ã€ãªã‚‹ã»ã©
    - ã¨ã„ã†ã‚ã‘ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®æ§‹æ–‡è§£æå™¨ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå½¢å¼ï¼ˆJSONã€YAMLã€TOMLã€ INIãªã©ï¼‰ ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã¨åŒæ§˜ã«èº«è¿‘ã«æ„Ÿã˜ã€ç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã‚ã«ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
      è¨€èªã®æ§‹æ–‡è§£æå™¨ãŒç”Ÿæˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã¤ã„ã¦ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

### letæ–‡ã‚’æ­£ã—ãæ§‹æ–‡è§£æã™ã‚‹ã¨ã„ã†ã®ã¯ä¸€ä½“ã©ã†ã„ã†ã“ã¨ã ã‚ã†ã‹ï¼Ÿ

ãã‚Œã¯ã€å…ƒã®letæ–‡ã«å«ã¾ã‚Œã‚‹ æƒ…å ±ã‚’æ­£ç¢ºã«è¡¨ç¾ã—ãŸASTã‚’æ§‹æ–‡è§£æå™¨ãŒç”Ÿæˆã™ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚ã“ã‚Œã¯ã‚‚ã£ã¨ã‚‚ã‚‰ã—ãèã“ãˆã‚‹ã€‚
ã¨ã¯è¨€ã†ã‚‚ã®ã®ã€ã¾ã ASTã¯å®Ÿè£…ã—ã¦ã„ãªã„ã—ã€ãã‚ŒãŒã©ã†ã„ã†å½¢ã§ã‚ã‚‹ã¹ãã‹ã™ã‚‰ã‚ã‹ã£ã¦ã„ãªã„ã€‚
ãã“ã§ã€ã¾ãšã¯Monkeyã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆãè¦³å¯Ÿã—ã€ã©ã®ã‚ˆã†ã«æ§‹é€ åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’è¦‹ã‚‹ã“ã¨ã«ã— ã‚ˆã†ã€‚ãã†ã™ã‚Œã°ã€letæ–‡ã‚’æ­£ç¢ºã«è¡¨ç¾ã™ã‚‹ã«ã‚ãŸã£ã¦ã€ASTã«å¿…è¦ã¨ãªã‚‹éƒ¨å“ã‚’å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ãª ã‚‹ã€‚

### å„NodeãŒä½•ã§ã€ã©ã†ã„ã†å‹ãªã®ã‹ã€ã©ã†ã„ã†å±æ€§ãªã®ã‹ã‚’ã„ã¡ã„ã¡ç¢ºèªã—ãŸã»ã†ãŒã„ã„!

ã£ã¦ã„ã†ã‹ã€ãã†ã—ãªã„ã¨ç„¡ç†ã ã­ã€‚ç„¡ã®å†™çµŒã«ãªã‚‹ã€‚

### `Parser.expectPeek()`ã¯ã€æœŸå¾…ã™ã‚‹ã‚„ã¤ãŒæ¥ã‚‹ãªã‚‰èª­ã¿é€²ã‚ã¡ã‚ƒã†ï¼

ãƒˆãƒ¼ã‚¯ãƒ³ã‚’èª­ã¿é€²ã‚ã‚‹ã®ã‹ï¼Ÿ å¤‰ã‚ã‚‰ãªã„ã‹ï¼Ÿ ã¯å¤§äº‹ãªã¨ã“ã ã¨ãŠã‚‚ã†

### letæ–‡ã‚’ã„ã¡ã„ã¡ç¢ºèª

![](2022-07-20_letæ–‡ã¨ã‹.png)


-->